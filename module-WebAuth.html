<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>@stellar/stellar-sdk Documentation WebAuth</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">@stellar/stellar-sdk</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/stellar/js-stellar-sdk"
                        >
                            GitHub
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://www.npmjs.com/package/@stellar/stellar-sdk"
                        >
                            npm
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Modules</h3><ul><li><a href="module-Federation.html">Federation</a></li><li><a href="module-Horizon.html">Horizon</a></li><li><a href="module-StellarToml.html">StellarToml</a></li><li><a href="module-WebAuth.html">WebAuth</a></li><li><a href="module-contract.html">contract</a></li><li><a href="module-rpc.html">rpc</a></li></ul><h3>Classes</h3><ul><li><a href="Account.html">Account</a></li><li><a href="Address.html">Address</a></li><li><a href="Asset.html">Asset</a></li><li><a href="CallBuilder.html">CallBuilder</a></li><li><a href="Claimant.html">Claimant</a></li><li><a href="Config.html">Config</a></li><li><a href="Contract.html">Contract</a></li><li><a href="FeeBumpTransaction.html">FeeBumpTransaction</a></li><li><a href="Int128_Int128.html">Int128#Int128</a></li><li><a href="Int256_Int256.html">Int256#Int256</a></li><li><a href="Keypair.html">Keypair</a></li><li><a href="LiquidityPoolAsset.html">LiquidityPoolAsset</a></li><li><a href="LiquidityPoolId.html">LiquidityPoolId</a></li><li><a href="Memo.html">Memo</a></li><li><a href="MuxedAccount.html">MuxedAccount</a></li><li><a href="Operation.html">Operation</a></li><li><a href="ScInt.html">ScInt</a></li><li><a href="SignerKey.html">SignerKey</a></li><li><a href="SorobanDataBuilder.html">SorobanDataBuilder</a></li><li><a href="StrKey.html">StrKey</a></li><li><a href="Transaction.html">Transaction</a></li><li><a href="TransactionBuilder.html">TransactionBuilder</a></li><li><a href="Uint128_Uint128.html">Uint128#Uint128</a></li><li><a href="Uint256_Uint256.html">Uint256#Uint256</a></li><li><a href="Utils.html">Utils</a></li><li><a href="XdrLargeInt.html">XdrLargeInt</a></li><li><a href="module-Federation.Server.html">Federation.Server</a></li><li><a href="module-Horizon.Server.html">Horizon.Server</a></li><li><a href="module-StellarToml.Resolver.html">StellarToml.Resolver</a></li><li><a href="module-contract.AssembledTransaction.html">contract.AssembledTransaction</a></li><li><a href="module-contract.Client.html">contract.Client</a></li><li><a href="module-contract.SentTransaction.html">contract.SentTransaction</a></li><li><a href="module-contract.Spec.html">contract.Spec</a></li><li><a href="module-rpc.Server.html">rpc.Server</a></li></ul><h3>Interfaces</h3><ul><li><a href="Configuration.html">Configuration</a></li><li><a href="module-contract.ErrorMessage.html">contract.ErrorMessage</a></li><li><a href="module-contract.Result.html">contract.Result</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AuthClawbackEnabledFlag">AuthClawbackEnabledFlag</a></li><li><a href="global.html#AuthImmutableFlag">AuthImmutableFlag</a></li><li><a href="global.html#AuthRequiredFlag">AuthRequiredFlag</a></li><li><a href="global.html#AuthRevocableFlag">AuthRevocableFlag</a></li><li><a href="global.html#BASE_FEE">BASE_FEE</a></li><li><a href="global.html#LinearSleepStrategy">LinearSleepStrategy</a></li><li><a href="global.html#MemoHash">MemoHash</a></li><li><a href="global.html#MemoID">MemoID</a></li><li><a href="global.html#MemoNone">MemoNone</a></li><li><a href="global.html#MemoReturn">MemoReturn</a></li><li><a href="global.html#MemoText">MemoText</a></li><li><a href="global.html#Networks">Networks</a></li><li><a href="global.html#TimeoutInfinite">TimeoutInfinite</a></li><li><a href="global.html#asciiCompare">asciiCompare</a></li><li><a href="global.html#authorizeEntry">authorizeEntry</a></li><li><a href="global.html#authorizeInvocation">authorizeInvocation</a></li><li><a href="global.html#buildInvocationTree">buildInvocationTree</a></li><li><a href="global.html#decodeAddressToMuxedAccount">decodeAddressToMuxedAccount</a></li><li><a href="global.html#defaultConfig">defaultConfig</a></li><li><a href="global.html#encodeMuxedAccount">encodeMuxedAccount</a></li><li><a href="global.html#encodeMuxedAccountToAddress">encodeMuxedAccountToAddress</a></li><li><a href="global.html#extractBaseAddress">extractBaseAddress</a></li><li><a href="global.html#getLiquidityPoolId">getLiquidityPoolId</a></li><li><a href="global.html#humanizeEvents">humanizeEvents</a></li><li><a href="global.html#isValid">isValid</a></li><li><a href="global.html#isValidDate">isValidDate</a></li><li><a href="global.html#nativeToScVal">nativeToScVal</a></li><li><a href="global.html#scValToBigInt">scValToBigInt</a></li><li><a href="global.html#scValToNative">scValToNative</a></li><li><a href="global.html#walkInvocationTree">walkInvocationTree</a></li></ul></div><div class="category"><h2>Errors</h2><h3>Classes</h3><ul><li><a href="AccountRequiresMemoError.html">AccountRequiresMemoError</a></li><li><a href="BadRequestError.html">BadRequestError</a></li><li><a href="BadResponseError.html">BadResponseError</a></li><li><a href="NetworkError.html">NetworkError</a></li><li><a href="NotFoundError.html">NotFoundError</a></li><li><a href="module-WebAuth.InvalidChallengeError.html">WebAuth.InvalidChallengeError</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Module</p>
                    <h1>WebAuth</h1>
                </header>
                




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Stellar Web Authentication</p></div>
        

        
            














<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://stellar.org/protocol-10">SEP-10 Specification</a></li>
        </ul>
    </dd>
    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line17">line 17</a>
            </span>
        </p>
    
</dl>






















        
    
    </div>
    
    

    

    
        <h3 class="subsection-title">Classes</h3>

        <dl>
            <dt><a href="module-WebAuth.InvalidChallengeError.html">InvalidChallengeError</a></dt>
            <dd></dd>
        </dl>
    

    

    

    

    

    
        <div class='vertical-section'>
            <h1>Methods</h1>
            <div class="members">
            
                <div class="member">


    
    <h4 class="name" id="~buildChallengeTx">
        <a class="href-link" href="#~buildChallengeTx">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                buildChallengeTx<span class="signature">(serverKeypair, clientAccountID, homeDomain, timeout<span class="signature-attributes">opt</span>, networkPassphrase, webAuthDomain, memo<span class="signature-attributes">opt</span>, clientDomain<span class="signature-attributes">opt</span>, clientSigningKey<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Returns a valid <a href="https://stellar.org/protocol/sep-10">SEP-10</a>
challenge transaction which you can use for Stellar Web Authentication.</p>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            
            <th>Attributes</th>
            

            
            <th>Default</th>
            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>serverKeypair</code></td>
  

  <td class="type">
  
      
<code class="param-type"><a href="Keypair.html">Keypair</a></code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  
      <td class="default">
      
      </td>
  

  <td class="description last"><p>Keypair for server's signing account.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>clientAccountID</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  
      <td class="default">
      
      </td>
  

  <td class="description last"><p>The stellar account (G...) or muxed account
(M...) that the wallet wishes to authenticate with the server.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>homeDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  
      <td class="default">
      
      </td>
  

  <td class="description last"><p>The fully qualified domain name of the service
requiring authentication</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>timeout</code></td>
  

  <td class="type">
  
      
<code class="param-type">number</code>


  
  </td>

  
      <td class="attributes">
      
          &lt;optional><br>
      

      

      
      </td>
  

  
      <td class="default">
      
          300
      
      </td>
  

  <td class="description last"><p>Challenge duration (default to 5 minutes).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>networkPassphrase</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  
      <td class="default">
      
      </td>
  

  <td class="description last"><p>The network passphrase. If you pass this
argument then timeout is required.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>webAuthDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  
      <td class="default">
      
      </td>
  

  <td class="description last"><p>The fully qualified domain name of the service
issuing the challenge.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>memo</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      
          &lt;optional><br>
      

      

      
      </td>
  

  
      <td class="default">
      
          null
      
      </td>
  

  <td class="description last"><p>The memo to attach to the challenge transaction. The
memo must be of type <code>id</code>. If the <code>clientaccountID</code> is a muxed account,
memos cannot be used.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>clientDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      
          &lt;optional><br>
      

      

      
      </td>
  

  
      <td class="default">
      
          null
      
      </td>
  

  <td class="description last"><p>The fully qualified domain of the client
requesting the challenge. Only necessary when the 'client_domain'
parameter is passed.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>clientSigningKey</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      
          &lt;optional><br>
      

      

      
      </td>
  

  
      <td class="default">
      
          null
      
      </td>
  

  <td class="description last"><p>The public key assigned to the SIGNING_KEY
attribute specified on the stellar.toml hosted on the client domain. Only
necessary when the 'client_domain' parameter is passed.</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://stellar.org/protocol/sep-10">SEP-10: Stellar Web Auth</a></li>
        </ul>
    </dd>
    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line66">line 66</a>
            </span>
        </p>
    
</dl>
















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Throws:</label></div>
        <div class="column is-10">
            
                    
<div class="columns">
    
    <div class='param-desc column is-7'><p>Will throw if <code>clientAccountID is a muxed account, and </code>memo`
is present.</p></div>
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
<code class="param-type">Error</code>


    </div>
    
</div>

                
                    
<div class="columns">
    
    <div class='param-desc column is-7'><p>Will throw if <code>clientDomain</code> is provided, but
<code>clientSigningKey</code> is missing</p></div>
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
<code class="param-type">Error</code>


    </div>
    
</div>

                
        </div>
    </div>



    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>A base64 encoded string of the raw TransactionEnvelope xdr
struct for the transaction.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type">string</code>


    </div>
    
</div>

                
        </div>
    </div>




    <h5>Example</h5>
    
    
        <pre class="prettyprint"><code>import { Keypair, Networks, WebAuth } from 'stellar-sdk'

let serverKeyPair = Keypair.fromSecret("server-secret")
let challenge = WebAuth.buildChallengeTx(
   serverKeyPair,
   "client-stellar-account-id",
   "stellar.org",
   300,
   Networks.TESTNET);</code></pre>
    


</div>
            
                <div class="member">


    
    <h4 class="name" id="~gatherTxSigners">
        <a class="href-link" href="#~gatherTxSigners">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                gatherTxSigners<span class="signature">(transaction, signers)</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Checks if a transaction has been signed by one or more of the given signers,
returning a list of non-repeated signers that were found to have signed the
given transaction.</p>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>transaction</code></td>
  

  <td class="type">
  
      
<code class="param-type"><a href="Transaction.html">Transaction</a></code>
|

<code class="param-type"><a href="FeeBumpTransaction.html">FeeBumpTransaction</a></code>


  
  </td>

  

  

  <td class="description last"><p>The signed transaction.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>signers</code></td>
  

  <td class="type">
  
      
<code class="param-type">Array.&lt;string></code>


  
  </td>

  

  

  <td class="description last"><p>The signer's public keys.</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line582">line 582</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>A list of signers that were found to have signed
the transaction.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type">Array.&lt;string></code>


    </div>
    
</div>

                
        </div>
    </div>




    <h5>Example</h5>
    
    
        <pre class="prettyprint"><code>let keypair1 = Keypair.random();
let keypair2 = Keypair.random();
const account = new StellarSdk.Account(keypair1.publicKey(), "-1");

const transaction = new TransactionBuilder(account, { fee: 100 })
   .setTimeout(30)
   .build();

transaction.sign(keypair1, keypair2)
WebAuth.gatherTxSigners(transaction, [keypair1.publicKey(), keypair2.publicKey()])</code></pre>
    


</div>
            
                <div class="member">


    
    <h4 class="name" id="~readChallengeTx">
        <a class="href-link" href="#~readChallengeTx">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                readChallengeTx<span class="signature">(challengeTx, serverAccountID, networkPassphrase, homeDomains, webAuthDomain)</span><span class="type-signature"> &rarr; {<a href="module-WebAuth.html#.ChallengeTxDetails">module:WebAuth.ChallengeTxDetails</a>}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Reads a SEP-10 challenge transaction and returns the decoded transaction and
client account ID contained within.</p>
<p>It also verifies that the transaction has been signed by the server.</p>
<p>It does not verify that the transaction has been signed by the client or that
any signatures other than the server's on the transaction are valid. Use one
of the following functions to completely verify the transaction:</p>
<ul>
<li><a href="module-WebAuth.html#~verifyChallengeTxThreshold">module:WebAuth~verifyChallengeTxThreshold</a></li>
<li><a href="module-WebAuth.html#~verifyChallengeTxSigners">module:WebAuth~verifyChallengeTxSigners</a></li>
</ul>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>challengeTx</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>SEP0010 challenge transaction in base64.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>serverAccountID</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The server's stellar account (public key).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>networkPassphrase</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The network passphrase, e.g.: 'Test SDF
Network ; September 2015' (see <a href="global.html#Networks">Networks</a>)</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>homeDomains</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>
|

<code class="param-type">Array.&lt;string></code>


  
  </td>

  

  

  <td class="description last"><p>The home domain that is expected
to be included in the first Manage Data operation's string key. If an
array is provided, one of the domain names in the array must match.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>webAuthDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The home domain that is expected to be included
as the value of the Manage Data operation with the 'web_auth_domain' key.
If no such operation is included, this parameter is not used.</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://stellar.org/protocol/sep-10">SEP-10: Stellar Web Auth</a></li>
        </ul>
    </dd>
    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line148">line 148</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>The actual transaction and the
Stellar public key (master key) used to sign the Manage Data operation,
the matched home domain, and the memo attached to the transaction, which
will be null if not present.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type"><a href="module-WebAuth.html#.ChallengeTxDetails">module:WebAuth.ChallengeTxDetails</a></code>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="~verifyChallengeTxSigners">
        <a class="href-link" href="#~verifyChallengeTxSigners">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                verifyChallengeTxSigners<span class="signature">(challengeTx, serverAccountID, networkPassphrase, signers, homeDomains<span class="signature-attributes">opt</span>, webAuthDomain)</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Verifies that for a SEP 10 challenge transaction all signatures on the
transaction are accounted for. A transaction is verified if it is signed by
the server account, and all other signatures match a signer that has been
provided as an argument (as the accountIDs list). Additional signers can be
provided that do not have a signature, but all signatures must be matched to
a signer (accountIDs) for verification to succeed. If verification succeeds,
a list of signers that were found is returned, not including the server
account ID.</p>
<p>Signers that are not prefixed as an address/account ID strkey (G...) will be
ignored.</p>
<p>Errors will be raised if:</p>
<ul>
<li>The transaction is invalid according to
<a href="module-WebAuth.html#~readChallengeTx">module:WebAuth~readChallengeTx</a>.</li>
<li>No client signatures are found on the transaction.</li>
<li>One or more signatures in the transaction are not identifiable as the
server account or one of the signers provided in the arguments.</li>
</ul>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            
            <th>Attributes</th>
            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>challengeTx</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  

  <td class="description last"><p>SEP0010 challenge transaction in base64.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>serverAccountID</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  

  <td class="description last"><p>The server's stellar account (public key).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>networkPassphrase</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  

  <td class="description last"><p>The network passphrase, e.g.: 'Test SDF
Network ; September 2015' (see <a href="global.html#Networks">Networks</a>).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>signers</code></td>
  

  <td class="type">
  
      
<code class="param-type">Array.&lt;string></code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  

  <td class="description last"><p>The signers public keys. This list should
contain the public keys for all signers that have signed the transaction.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>homeDomains</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>
|

<code class="param-type">Array.&lt;string></code>


  
  </td>

  
      <td class="attributes">
      
          &lt;optional><br>
      

      

      
      </td>
  

  

  <td class="description last"><p>The home domain(s) that should
be included in the first Manage Data operation's string key. Required in
readChallengeTx().</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>webAuthDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  
      <td class="attributes">
      

      

      
      </td>
  

  

  <td class="description last"><p>The home domain that is expected to be included
as the value of the Manage Data operation with the 'web_auth_domain' key,
if present. Used in readChallengeTx().</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://stellar.org/protocol/sep-10">SEP-10: Stellar Web Auth</a></li>
        </ul>
    </dd>
    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line440">line 440</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>The list of signers public keys that have signed
the transaction, excluding the server account ID.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type">Array.&lt;string></code>


    </div>
    
</div>

                
        </div>
    </div>




    <h5>Example</h5>
    
    
        <pre class="prettyprint"><code>import { Networks, TransactionBuilder, WebAuth }  from 'stellar-sdk';

const serverKP = Keypair.random();
const clientKP1 = Keypair.random();
const clientKP2 = Keypair.random();

// Challenge, possibly built in the server side
const challenge = WebAuth.buildChallengeTx(
  serverKP,
  clientKP1.publicKey(),
  "SDF",
  300,
  Networks.TESTNET
);

// clock.tick(200);  // Simulates a 200 ms delay when communicating from server to client

// Transaction gathered from a challenge, possibly from the client side
const transaction = TransactionBuilder.fromXDR(challenge, Networks.TESTNET);
transaction.sign(clientKP1, clientKP2);
const signedChallenge = transaction
        .toEnvelope()
        .toXDR("base64")
        .toString();

// The result below should be equal to [clientKP1.publicKey(), clientKP2.publicKey()]
WebAuth.verifyChallengeTxSigners(
   signedChallenge,
   serverKP.publicKey(),
   Networks.TESTNET,
   threshold,
   [clientKP1.publicKey(), clientKP2.publicKey()]
);</code></pre>
    


</div>
            
                <div class="member">


    
    <h4 class="name" id="~verifyChallengeTxThreshold">
        <a class="href-link" href="#~verifyChallengeTxThreshold">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                verifyChallengeTxThreshold<span class="signature">(challengeTx, serverAccountID, networkPassphrase, threshold, signerSummary, homeDomains, webAuthDomain)</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Verifies that for a SEP-10 challenge transaction all signatures on the
transaction are accounted for and that the signatures meet a threshold on an
account. A transaction is verified if it is signed by the server account, and
all other signatures match a signer that has been provided as an argument,
and those signatures meet a threshold on the account.</p>
<p>Signers that are not prefixed as an address/account ID strkey (G...) will be
ignored.</p>
<p>Errors will be raised if:</p>
<ul>
<li>The transaction is invalid according to
<a href="module-WebAuth.html#~readChallengeTx">module:WebAuth~readChallengeTx</a>.</li>
<li>No client signatures are found on the transaction.</li>
<li>One or more signatures in the transaction are not identifiable as the
server account or one of the signers provided in the arguments.</li>
<li>The signatures are all valid but do not meet the threshold.</li>
</ul>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>challengeTx</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>SEP0010 challenge transaction in base64.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>serverAccountID</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The server's stellar account (public key).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>networkPassphrase</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The network passphrase, e.g.: 'Test SDF
Network ; September 2015' (see <a href="global.html#Networks">Networks</a>).</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>threshold</code></td>
  

  <td class="type">
  
      
<code class="param-type">number</code>


  
  </td>

  

  

  <td class="description last"><p>The required signatures threshold for verifying
this transaction.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>signerSummary</code></td>
  

  <td class="type">
  
      
<code class="param-type">Array.&lt;ServerApi.AccountRecordSigners></code>


  
  </td>

  

  

  <td class="description last"><p>a map of all
authorized signers to their weights. It's used to validate if the
transaction signatures have met the given threshold.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>homeDomains</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>
|

<code class="param-type">Array.&lt;string></code>


  
  </td>

  

  

  <td class="description last"><p>The home domain(s) that should
be included in the first Manage Data operation's string key. Required in
verifyChallengeTxSigners() =&gt; readChallengeTx().</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>webAuthDomain</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The home domain that is expected to be included
as the value of the Manage Data operation with the 'web_auth_domain' key,
if present. Used in verifyChallengeTxSigners() =&gt; readChallengeTx().</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://stellar.org/protocol/sep-10">SEP-10: Stellar Web Auth</a></li>
        </ul>
    </dd>
    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line355">line 355</a>
            </span>
        </p>
    
</dl>
















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Throws:</label></div>
        <div class="column is-10">
            
                    
<div class="columns">
    
    <div class='param-desc column is-7'><p>Will throw if the collective
weight of the transaction's signers does not meet the necessary threshold
to verify this transaction.</p></div>
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
<code class="param-type"><a href="module-WebAuth.InvalidChallengeError.html">module:WebAuth.InvalidChallengeError</a></code>


    </div>
    
</div>

                
        </div>
    </div>



    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>The list of signers public keys that have signed
the transaction, excluding the server account ID, given that the threshold
was met.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type">Array.&lt;string></code>


    </div>
    
</div>

                
        </div>
    </div>




    <h5>Example</h5>
    
    
        <pre class="prettyprint"><code>import { Networks, TransactionBuilder, WebAuth } from 'stellar-sdk';

const serverKP = Keypair.random();
const clientKP1 = Keypair.random();
const clientKP2 = Keypair.random();

// Challenge, possibly built in the server side
const challenge = WebAuth.buildChallengeTx(
  serverKP,
  clientKP1.publicKey(),
  "SDF",
  300,
  Networks.TESTNET
);

// clock.tick(200);  // Simulates a 200 ms delay when communicating from server to client

// Transaction gathered from a challenge, possibly from the client side
const transaction = TransactionBuilder.fromXDR(challenge, Networks.TESTNET);
transaction.sign(clientKP1, clientKP2);
const signedChallenge = transaction
        .toEnvelope()
        .toXDR("base64")
        .toString();

// Defining the threshold and signerSummary
const threshold = 3;
const signerSummary = [
   {
     key: this.clientKP1.publicKey(),
     weight: 1,
   },
   {
     key: this.clientKP2.publicKey(),
     weight: 2,
   },
 ];

// The result below should be equal to [clientKP1.publicKey(), clientKP2.publicKey()]
WebAuth.verifyChallengeTxThreshold(
   signedChallenge,
   serverKP.publicKey(),
   Networks.TESTNET,
   threshold,
   signerSummary
);</code></pre>
    


</div>
            
                <div class="member">


    
    <h4 class="name" id="~verifyTxSignedBy">
        <a class="href-link" href="#~verifyTxSignedBy">#</a>
        
            
                <span class='tag'>inner</span>
            
        
        <span class="code-name">
            
                verifyTxSignedBy<span class="signature">(transaction, accountID)</span><span class="type-signature"> &rarr; {boolean}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <p>Verifies if a transaction was signed by the given account id.</p>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>transaction</code></td>
  

  <td class="type">
  
      
<code class="param-type"><a href="Transaction.html">Transaction</a></code>
|

<code class="param-type"><a href="FeeBumpTransaction.html">FeeBumpTransaction</a></code>


  
  </td>

  

  

  <td class="description last"><p>The signed transaction.</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>accountID</code></td>
  

  <td class="type">
  
      
<code class="param-type">string</code>


  
  </td>

  

  

  <td class="description last"><p>The signer's public key.</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.js.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.js.html">lib/webauth/utils.js</a>, <a href="lib_webauth_utils.js.html#line556">line 556</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>Whether or not <code>accountID</code> was found to have signed the
transaction.</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<code class="param-type">boolean</code>


    </div>
    
</div>

                
        </div>
    </div>




    <h5>Example</h5>
    
    
        <pre class="prettyprint"><code>let keypair = Keypair.random();
const account = new StellarSdk.Account(keypair.publicKey(), "-1");

const transaction = new TransactionBuilder(account, { fee: 100 })
   .setTimeout(30)
   .build();

transaction.sign(keypair)
WebAuth.verifyTxSignedBy(transaction, keypair.publicKey())</code></pre>
    


</div>
            
            </div>
        </div>
    

    
        <div class='vertical-section'>
            <h1>Type Definitions</h1>
            <div class="members">
            
                <div class="member">

    <span class="method-parameter is-pulled-right">
        <label>Type:</label>
        
<code class="param-type">object</code>


    </span>

<h4 class="name" id=".ChallengeTxDetails">
    <a class="href-link" href="#.ChallengeTxDetails">#</a>
    
    <span class="code-name">
        ChallengeTxDetails
    </span>
    
</h4>




<div class="description">
    <p>A parsed and validated challenge transaction, and some of its constituent details.</p>
</div>





    <h5 class="subsection-title">Properties:</h5>

    
<div class="table-container">
    <table class="props table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            
            <th>Attributes</th>
            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        
            
<tr class="deep-level-0">
    
        <td class="name"><code>tx</code></td>
    

    <td class="type">
    
        
<code class="param-type"><a href="Transaction.html">Transaction</a></code>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>The challenge transaction.</p></td>
</tr>

        
            
<tr class="deep-level-0">
    
        <td class="name"><code>clientAccountId</code></td>
    

    <td class="type">
    
        
<code class="param-type">string</code>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>The Stellar public key (master key) used to sign the Manage Data operation.</p></td>
</tr>

        
            
<tr class="deep-level-0">
    
        <td class="name"><code>matchedHomeDomain</code></td>
    

    <td class="type">
    
        
<code class="param-type">string</code>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>The matched home domain.</p></td>
</tr>

        
            
<tr class="deep-level-0">
    
        <td class="name"><code>memo</code></td>
    

    <td class="type">
    
        
<code class="param-type">string</code>


    
    </td>

    
        <td class="attributes">
        
            &lt;optional><br>
        

        
        </td>
    

    

    <td class="description last"><p>The memo attached to the transaction, which will be null if not present</p></td>
</tr>

        
        </tbody>
    </table>
</div>



<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="lib_webauth_utils.d.ts.html" class="button">View Source</a>
            <span>
                <a href="lib_webauth_utils.d.ts.html">lib/webauth/utils.d.ts</a>, <a href="lib_webauth_utils.d.ts.html#line50">line 50</a>
            </span>
        </p>
    
</dl>





</div>
            
            </div>
        </div>
    

    
</article>

</section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>